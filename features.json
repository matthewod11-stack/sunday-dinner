{
  "$schema": "./features.schema.json",
  "_meta": {
    "description": "Sunday Dinner v1 feature tracking - Status: not-started | in-progress | pass | fail | blocked",
    "lastUpdated": "2026-01-15",
    "currentPhase": "phase-4-polish",
    "totalFeatures": 24,
    "passing": 28,
    "failing": 0,
    "inProgress": 1,
    "notStarted": 3
  },
  "phase-1-foundation": {
    "project-setup": {
      "status": "pass",
      "agent": "single",
      "week": 1,
      "notes": "Next.js 14 (App Router), TypeScript strict, Tailwind CSS, Supabase client, ESLint + Prettier"
    },
    "core-types": {
      "status": "pass",
      "agent": "single",
      "week": 1,
      "notes": "Recipe, Meal, Timeline, Task, Shopping types and contracts"
    },
    "database-schema": {
      "status": "pass",
      "agent": "single",
      "week": 1,
      "notes": "Supabase migrations created and applied: recipes, meals, meal_recipes, timelines, tasks tables + RLS policies + storage bucket"
    },
    "base-components": {
      "status": "pass",
      "agent": "single",
      "week": 2,
      "notes": "Button, Card, Input, Label, Modal, Skeleton, Toast, ErrorBoundary using Radix UI + CVA. Fraunces display font. Demo at /demo"
    },
    "ai-layer": {
      "status": "pass",
      "agent": "single",
      "week": 2,
      "notes": "ClaudeAIService with visionExtractRecipe, generateTimeline, reviewScaling, suggestRecalculation. URL/PDF stubbed for Week 4."
    },
    "pwa-infrastructure": {
      "status": "pass",
      "agent": "single",
      "week": 2,
      "notes": "PWA manifest.json, Service Worker with cache strategies (cache-first, network-first, stale-while-revalidate), useOffline hook, OfflineIndicator component"
    },
    "app-shell": {
      "status": "pass",
      "agent": "single",
      "week": 2,
      "notes": "Header with hamburger menu, PageHeader component, empty states (RecipeBoxEmpty, MealCalendarEmpty), routes (/recipes, /meals, /recipes/new, /meals/new), health check API. Foundation complete!"
    }
  },
  "phase-2-core": {
    "recipe-photo-ingestion": {
      "status": "pass",
      "agent": "A",
      "week": 3,
      "notes": "Photo upload with mobile camera, image compression <500KB, Claude Vision extraction, side-by-side correction UI with uncertain field highlighting. Italian translation support added."
    },
    "recipe-manual-entry": {
      "status": "pass",
      "agent": "A",
      "week": 3,
      "notes": "Manual entry form as fallback, extraction failure handling with graceful degradation"
    },
    "recipe-url-scraping": {
      "status": "pass",
      "agent": "A",
      "week": 4,
      "notes": "URL input, JSON-LD extraction, site-specific handlers (AllRecipes, NYT Cooking, etc.), generic HTML fallback"
    },
    "recipe-pdf-parsing": {
      "status": "pass",
      "agent": "A",
      "week": 4,
      "notes": "PDF upload with drag-drop, pdf.js rendering to canvas, Claude Vision extraction. DOMMatrix build issue fixed."
    },
    "shopping-list": {
      "status": "pass",
      "agent": "A",
      "week": 5,
      "notes": "Unit reconciliation (volume/weight), ingredient normalization, store section grouping, staples with localStorage, print view"
    },
    "meal-setup": {
      "status": "pass",
      "agent": "B",
      "week": 3,
      "notes": "Meal creation form with name/serve time/guest count, recipe picker with search, meal detail view, edit/delete functionality"
    },
    "recipe-scaling": {
      "status": "pass",
      "agent": "B",
      "week": 3,
      "notes": "Scaling factor input per recipe, Claude scaling review flags non-linear concerns, scaling multiplier display"
    },
    "timeline-generation": {
      "status": "pass",
      "agent": "B",
      "week": 4,
      "notes": "Claude generates timeline, deterministic validator (oven conflicts, dependencies, durations, serve time), conflict detection UI"
    },
    "timeline-views": {
      "status": "pass",
      "agent": "B",
      "week": 4,
      "notes": "Now/Next/Later view with task grouping, Gantt view with recipe color coding, view switcher"
    },
    "timeline-editing": {
      "status": "pass",
      "agent": "B",
      "week": 5,
      "notes": "Task edit modal (time, duration, notes), form-based reorder UI, delete with confirmation, regeneration, mobile-responsive"
    },
    "integration-week-6": {
      "status": "pass",
      "agent": "both",
      "week": 6,
      "notes": "Full Recipe → Meal → Timeline → Shopping flow verified. Bug fix: timeline updateTask now recalculates end_time properly."
    }
  },
  "phase-3-live": {
    "kitchen-walkthrough": {
      "status": "pass",
      "agent": "A",
      "week": 7,
      "notes": "Ready Check modal, equipment checklist from first hour tasks, skip preference with localStorage"
    },
    "live-execution-core": {
      "status": "pass",
      "agent": "A",
      "week": 7,
      "notes": "Start Cooking button, Now/Next/Later live view, task checkoff with optimistic updates, undo within 30s, progress indicator"
    },
    "timers": {
      "status": "pass",
      "agent": "A",
      "week": 7,
      "notes": "Singleton TimerService, Web Audio alerts, vibration fallback, active timer banner with pause/resume/reset"
    },
    "running-behind": {
      "status": "pass",
      "agent": "A",
      "week": 8,
      "notes": "I'm behind button, Claude recalculation, accept/adjust/manual options, offline +15min fallback, undo support"
    },
    "large-text-mode": {
      "status": "pass",
      "agent": "A",
      "week": 8,
      "notes": "Font size toggle via CSS vars, wake lock API, iOS fallback (silent video loop)"
    },
    "offline-resilience": {
      "status": "pass",
      "agent": "A",
      "week": 9,
      "notes": "IndexedDB queue (offline_queue, sync_status, meal_cache stores), Service Worker v2 with active meal caching, sync with exponential backoff, offline UI with graceful degradation"
    },
    "share-link-schema": {
      "status": "pass",
      "agent": "B",
      "week": 7,
      "notes": "meal_share_tokens table with RLS policies, UUID v4 token generation, ShareService (generate/validate/revoke), API routes (POST/GET/DELETE), ShareModal with copy-to-clipboard, expiration = serve time + 24h"
    },
    "share-link-viewer": {
      "status": "pass",
      "agent": "B",
      "week": 8,
      "notes": "Share link viewer route (/share/[token]), token validation, read-only view, 5-second polling, visibility API integration"
    },
    "share-integration": {
      "status": "pass",
      "agent": "B",
      "week": 9,
      "notes": "Integration testing verified: <5s update latency, read-only viewer confirmed, cross-browser/mobile compatible. Manual testing checklist documented."
    },
    "integration-week-9": {
      "status": "pass",
      "agent": "both",
      "week": 9,
      "notes": "Agent B: Share link data flow <5s, conflict detection, expired links. Agent A: Live Mode e2e, I'm Behind flow, offline resilience integration, timer/wake-lock."
    }
  },
  "phase-4-polish": {
    "ios-safari-testing": {
      "status": "in-progress",
      "agent": "single",
      "week": 10,
      "notes": "Code fixes complete: AbortSignal.timeout polyfill, PWA icons (192/512/apple-touch), viewport-fit cover, safe-area-inset CSS utils, enhanced private browsing warning. Manual testing checklist ready."
    },
    "performance": {
      "status": "not-started",
      "agent": "single",
      "week": 10,
      "notes": "Lighthouse audit (≥90 mobile), bundle size, image optimization"
    },
    "final-testing": {
      "status": "not-started",
      "agent": "single",
      "week": 11,
      "notes": "Real 20-person meal test, family member share link test, 5+ recipe cards"
    },
    "ship": {
      "status": "not-started",
      "agent": "single",
      "week": 11,
      "notes": "P0 bug fixes, production deployment, smoke test"
    }
  }
}
